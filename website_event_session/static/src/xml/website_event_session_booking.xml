<?xml version="1.0" encoding="utf-8" ?>
<templates xml:space="preserve">

    <t t-name="event_session_selector">
        <select name="event_session_id" class="custom-select">
            <option
                disabled="disabled"
                selected="selected"
                value=""
            >Select a session..</option>
            <t t-foreach="widget.sessions" t-as="session">
                <t
                    t-set="disabled"
                    t-value="!session.is_published || !session.event_registrations_open || session.event_registrations_sold_out"
                />
                <option
                    t-att-value="session.id"
                    t-att-disabled="disabled ? 'disabled' : null"
                >
                    <span t-esc="session.display_name" />
                    <span t-if="disabled">
                        <t t-if="!session.is_published">(Not published)</t>
                        <t
                            t-elif="!session.event_registrations_started"
                        >(Registrations not yet open)</t>
                        <t t-elif="session.event_registrations_sold_out">(Sold Out)</t>
                        <t t-else="">(Registrations Closed)</t>
                    </span>
                </option>
            </t>
        </select>
    </t>

    <t t-name="event_session_tickets">
        <div
            t-foreach="widget.tickets"
            t-as="ticket"
            class="row px-3 py-3 mx-0 bg-light border-bottom"
        >
            <div
                class="col-8 my-auto"
                itemscope="itemscope"
                itemtype="http://schema.org/Offer"
            >
                <h5 itemprop="name" t-esc="ticket.name" class="my-0" />
                <t t-if="ticket.description">
                    <small t-esc="ticket.description" class="text-muted py-2" />
                    <br />
                </t>
            </div>
            <div class="col-4 p-0 d-flex align-items-center justify-content-between">
                <div class="o_wevent_registration_multi_select" />
                <div class="w-auto ml-auto">
                    <select
                        t-if="!ticket.is_expired"
                        t-attf-name="nb_register-#{ticket.id}"
                        class="ticket-select custom-select"
                    >
                        <t t-set="seats_max" t-value="ticket.seats_max > 0 ? ticket.seats_max + 1 : 10" />
                        <t t-foreach="Array.from(Array(seats_max).keys())" t-as="nb">
                            <option
                                t-esc="nb"
                                t-att-selected="nb == 0 ? 'selected' : null"
                            />
                        </t>
                    </select>
                    <div t-else="" class="text-danger">
                        <span t-if="ticket.is_expired">Expired</span>
                        <span t-else="">Sold Out</span>
                    </div>
                </div>
            </div>
        </div>
    </t>

</templates>
